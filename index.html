<script>
    // Wait until the DOM is fully loaded
    document.addEventListener("DOMContentLoaded", function() {
        const roles = {
            food: ["Riziki", "Adara", "Leah", "Kaylee", "Kyle", "Shivani", "Chloe", "Ariel", "Ricky", "Lorraine", "Sina"],
            word: ["Riziki", "Adara", "Leah", "Kaylee", "Kyle", "Shivani", "Chloe", "Ariel", "Ricky", "Lorraine", "Sina"],
            worship: ["Riziki", "Adara", "Leah", "Kaylee", "Kyle", "Shivani", "Chloe", "Ariel", "Ricky", "Lorraine", "Sina"],
            iceBreaker: ["Riziki", "Adara", "Leah", "Kaylee", "Kyle", "Shivani", "Chloe", "Ariel", "Ricky", "Lorraine", "Sina"],
            announcements: ["Riziki", "Adara", "Leah", "Kaylee", "Kyle", "Shivani", "Chloe", "Ariel", "Ricky", "Lorraine", "Sina"]
        };

        const excludedFromFood = ["Riziki", "Adara", "Leah", "Kaylee"];

        let usedRoles = {
            food: [],
            word: [],
            worship: [],
            iceBreaker: [],
            announcements: []
        };

        const generateButton = document.getElementById("generateButton");
        const rolesList = document.getElementById("rolesList");

        const getRandomRole = (roleType) => {
            let availableCandidates = roles[roleType].filter(candidate => !usedRoles[roleType].includes(candidate) && !(roleType === "food" && excludedFromFood.includes(candidate)));
            if (availableCandidates.length === 0) {
                // Reset if all candidates have had a turn
                usedRoles[roleType] = [];
                availableCandidates = roles[roleType];
            }
            const randomIndex = Math.floor(Math.random() * availableCandidates.length);
            return availableCandidates[randomIndex];
        };

        const generateRoles = () => {
            // Generate roles for each task
            const foodRole = getRandomRole("food");
            const wordRole = getRandomRole("word");
            const worshipRole = getRandomRole("worship");
            const iceBreakerRole = getRandomRole("iceBreaker");
            const announcementsRole = getRandomRole("announcements");

            // Add the roles to used roles list
            usedRoles.food.push(foodRole);
            usedRoles.word.push(wordRole);
            usedRoles.worship.push(worshipRole);
            usedRoles.iceBreaker.push(iceBreakerRole);
            usedRoles.announcements.push(announcementsRole);

            // Display the roles
            document.getElementById("foodRole").textContent = foodRole;
            document.getElementById("wordRole").textContent = wordRole;
            document.getElementById("worshipRole").textContent = worshipRole;
            document.getElementById("iceBreakerRole").textContent = iceBreakerRole;
            document.getElementById("announcementsRole").textContent = announcementsRole;

            // Generate icebreaker suggestions
            document.getElementById("suggestion1").textContent = "Find 3 common things in the group";
            document.getElementById("suggestion2").textContent = "Pass the ball: Whoever catches it has to answer a question";
            document.getElementById("suggestion3").textContent = "Create a group story, each person says one line!";
        };

        generateButton.addEventListener("click", generateRoles);
    });
</script>
